%section#documentation-editor
  .editor-header
    %h1 Edit documentation

  .editor-content
    %h3 Pages
    %table.table.table-striped.pages
      %thead
        %tr
          %th Thumbnail
          %th Title
          %th Slug
          %th Description
          %th Languages
          %th Last modification
          %th Published at
          %th Published by
          %th.text-right Actions
      %tbody
        - DocumentationEditor::Page.order('id DESC').each do |p|
          %tr
            %td
              - if p.thumbnail
                = image_tag p.thumbnail_url
            %td= best_in_place p, :title, url: update_path(p)
            %td= best_in_place p, :slug, url: update_path(p)
            %td= best_in_place p, :description, url: update_path(p)
            %td= best_in_place p, :languages, url: update_path(p)
            %td= l p.created_at, format: :short
            %td= p.published_revision ? l(p.published_revision.created_at, format: :long) : ''
            %td= p.published_revision ? p.published_revision.author_id : ''
            %td.text-right
              = link_to edit_page_path(p), class: 'btn btn-default btn-sm' do
                %i.fa.fa-edit
                Edit
              = link_to preview_page_path(p), class: 'btn btn-default btn-sm' do
                %i.fa.fa-eye
                Preview
              = link_to history_path(p), class: 'btn btn-default btn-sm' do
                %i.fa.fa-history
                History
              = link_to delete_page_path(p), class: 'btn btn-danger btn-sm', data: { confirm: 'Are you sure you want to delete this page?', method: :delete } do
                %i.fa.fa-trash
                Delete
    %h3 Create a new page
    = form_for DocumentationEditor::Page.new, url: admin_path, html: { class: 'form form-inline' } do |f|
      = f.text_field :title, placeholder: 'Title', class: 'form-control'
      = f.text_field :slug, placeholder: 'tutorials/my-tutorial', class: 'form-control'
      = f.text_field :description, placeholder: 'Description', class: 'form-control'
      = f.text_field :languages, placeholder: 'ruby, php, python', class: 'form-control'
      = f.submit 'Create', class: 'btn btn-success'
